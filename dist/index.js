var d=(e,o)=>{Object.entries(o).forEach(([a,n])=>{switch(a){case"className":{n.split(/\s{1,}/).forEach(s=>{let t=s.trim();t&&e.classList.add(t)});break}case"style":Object.assign(e.style,n);break;case"dataset":Object.assign(e.dataset,n);break;default:if(a.startsWith("[")&&a.endsWith("]")){let t=a.substring(1,a.length-1);n===!1?e.removeAttribute(t):e.setAttribute(t,n===!0?"":n)}else e[a]!==n&&(e[a]=n)}})};var A=e=>{let o=new Text(""),a=!1,n=()=>{a&&(o.replaceWith(e),a=!1)};return{node:e,classMap:s=>{Object.entries(s).forEach(([t,p])=>{p?e.classList.add(t):e.classList.remove(t)})},attrMap:s=>{Object.entries(s).forEach(([t,p])=>{p===!1?e.removeAttribute(t):e.setAttribute(t,p===!0?"":p)})},dataMap:s=>{Object.entries(s).forEach(([t,p])=>{p===!1?delete e.dataset[t]:e.dataset[t]=p===!0?"":p})},text:s=>{e.textContent!==s&&(e.textContent=s)},style:s=>d(e,{style:s}),attrs:s=>d(e,s),show:()=>{e.style.removeProperty("display"),n()},hide:()=>{e.style.setProperty("display","none"),n()},remove:()=>{a||(e.replaceWith(o),a=!0)}}};var E=e=>!!(e&&(e.constructor===Object||Object.getPrototypeOf(e)===null));var I="__cI4Mp6yr0__";var u=e=>E(e)&&"id"in e&&e.id===I;var b=e=>E(e)&&"$"in e&&E(e.$)&&"id"in e.$&&e.$.id===x;var x="__PzroJBb1g__",f=e=>`data-FHF7Sj5kD1S-${e}`,P=e=>`<template ${f(e)}></template>`,y=class extends Set{run(){this.forEach(o=>{o()===!1&&this.delete(o)})}runAsync(){window.requestAnimationFrame(()=>this.run())}},C=(e,o)=>{let a=new Map,n=document.createElement("template"),s=()=>{let p=0;return e.reduce((T,l,i)=>{if(i===0)return l;let m=o[i-1],r="";return Array.isArray(m)?(r=`\${[${m.map((c,D)=>D).join(",")}]}`,p+=m.length):(r=`\${${p}}`,p++),`${T}${r}${l}`},"")},t=-1;return n.innerHTML=e.reduce((p,T,l)=>{let i=`${p}${T}`;if(!(l in o))return i;let m=o[l];return[].concat(m).forEach(r=>{t++;let c=typeof r;if(r!=null)if(c==="string"||c==="number"||c==="boolean")i+=r;else if(c==="function")a.set(t,r),i+=f(t);else if(r instanceof Node)a.set(t,r),i+=P(t);else if(b(r))a.set(t,r.$.node),i+=P(t);else if(u(r))a.set(t,r),i+=r.type==="attr"?f(t):P(t);else if(E(r))a.set(t,r),i+=f(t);else throw new Error(`Invalid template expression at index ${t}:
`+s())}),i},"").trim(),{taggedTemplate:n,taggedExps:a,createErrorTemplate:s}},S=({taggedTemplate:e,taggedExps:o,createErrorTemplate:a})=>{let n=e.content.cloneNode(!0),s=new Map,t=[],p=new y;o.forEach((l,i)=>{let m=f(i),r=n.querySelector(`[${m}]`);if(!r){let c=document.createElement("template");throw c.append(n),console.error(c),new Error(`Unable to interpolate expression at index ${i}. This could also have occurred because some prior expression was mismatched.
${a()}`)}if(r.removeAttribute(m),l instanceof Node)r.replaceWith(l);else if(u(l)){let{args:c,callback:D}=l,R=s.get(D)||[];R.push({node:r,index:i,args:c}),s.set(D,R)}else if(typeof l=="function"){let c=A(r);t.push(c),p.add(()=>l(c))}else d(r,l)});let T=new Proxy(Object.defineProperties({},{$:{value:{id:x,callbacks:p,node:n.childNodes.length===1?n.childNodes[0]:n},enumerable:!1}}),{defineProperty(l,i,m){if(i in l)throw new Error(`Duplicate template key: "${String(i)}"`);return Object.defineProperty(l,i,m),!0}});return t.forEach(l=>Object.defineProperty(l,"tpl",{value:T})),s.forEach((l,i)=>{i(T,l)}),T},N=(e,...o)=>S(C(e,o));var g=e=>Object.entries(e).map(([o,a])=>{let n=Object.entries(a).reduce((s,[t,p])=>{if(typeof p=="string"){let T=t.replace(/[A-Z]/g,l=>`-${l.toLowerCase()}`);return s+=`${T}:${p};`}return g(a)},"");return`${o}{${n}}`}).join("");export{d as attrs,N as h,N as html,g as style};
//# sourceMappingURL=index.js.map
